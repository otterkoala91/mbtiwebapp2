<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë˜ ì§ì—… íƒí—˜ í€´ì¦ˆ (MBTIí¸)</title>
    <!-- Tailwind CSS ë¡œë“œ --><script src="https://cdn.tailwindcss.com"></script>
    <!-- ê·€ì—¬ìš´ í•œê¸€ í°íŠ¸ (Gaegu) ë° ê¸°ë³¸ í°íŠ¸ (Noto Sans KR) ë¡œë“œ --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Gaegu í°íŠ¸ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ë˜, Noto Sans KRì„ í´ë°±ìœ¼ë¡œ ì§€ì • */
        body {
            font-family: 'Gaegu', 'Noto Sans KR', sans-serif;
            background-color: #FFFAF0; /* ë¶€ë“œëŸ¬ìš´ ë°°ê²½ìƒ‰ */
        }

        /* ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .btn {
            @apply px-6 py-3 m-2 rounded-full text-lg font-bold text-white shadow-lg transition-transform transform hover:scale-105 focus:outline-none;
        }
        
        /* í€´ì¦ˆ ë‹µë³€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .answer-btn {
             @apply px-6 py-4 m-2 rounded-2xl text-2xl font-bold text-white shadow-lg transition-transform transform hover:scale-105 focus:outline-none w-full text-center;
        }
        
        /* ë¡œë”(spinner) ìŠ¤íƒ€ì¼ */
        .loader {
            border: 8px solid #f3f3f3; /* Light grey */
            border-top: 8px solid #6366F1; /* Indigo */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1.5s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div class="w-full max-w-lg p-6 mx-auto bg-white rounded-3xl shadow-2xl text-center">

        <!-- 1. ì‹œì‘ í™”ë©´ --><div id="welcome-screen">
            <h1 class="text-5xl font-bold text-indigo-600 mb-4">ë‚˜ì˜ MBTI ì§„ë¡œ íƒí—˜!</h1>
            <img src="https://placehold.co/400x200/A5B4FC/312E81?text=My+MBTI+Quiz!" alt="í€´ì¦ˆ ì‹œì‘ ë°°ë„ˆ" class="rounded-2xl mx-auto mb-6 shadow-md"
                 onerror="this.src='https://placehold.co/400x200/A5B4FC/312E81?text=Ready%3F'">
            <p class="text-2xl text-gray-700 mb-8">
                ë‚˜ëŠ” ì–´ë–¤ ì‚¬ëŒì¼ê¹Œ?<br>20ê°œì˜ ê°„ë‹¨í•œ í€´ì¦ˆë¡œ<br>ë‚˜ì˜ MBTIì™€ ì–´ìš¸ë¦¬ëŠ” ì§ì—…ì„ ì°¾ì•„ë³´ì•„ìš”!
            </p>
            <button id="start-btn" class="btn bg-indigo-500 hover:bg-indigo-600 text-3xl px-10 py-4">
                ì‹œì‘!
            </button>
        </div>

        <!-- 2. í€´ì¦ˆ í™”ë©´ --><div id="quiz-screen" class="hidden">
            <div id="progress-bar" class="w-full bg-gray-200 rounded-full h-4 mb-4">
                <div id="progress" class="bg-green-400 h-4 rounded-full" style="width: 0%"></div>
            </div>
            <h2 id="question-number" class="text-xl font-bold text-gray-500 mb-2">ì§ˆë¬¸ 1/20</h2>
            <h3 id="question-text" class="text-3xl font-bold text-gray-800 mb-8 h-24 flex items-center justify-center">ì§ˆë¬¸ ë‚´ìš©</h3>
            <div id="answer-buttons" class="grid grid-cols-1 gap-4">
                <!-- ë‹µë³€ ë²„íŠ¼ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ --></div>
        </div>

        <!-- 3. ê²°ê³¼ í™”ë©´ --><div id="result-screen" class="hidden">
            <h2 class="text-2xl text-gray-600 mb-2">ë‚˜ì˜ MBTI ìœ í˜•ì€...</h2>
            <h1 id="result-type" class="text-5xl font-bold text-purple-600 mb-4">ê²°ê³¼ ìœ í˜•</h1>
            <p id="result-description" class="text-xl text-gray-700 mb-8 p-4 bg-purple-50 rounded-lg">
                ìœ í˜• ì„¤ëª…
            </p>
            <h3 class="text-3xl font-bold text-gray-800 mb-4">ì´ëŸ° ì§ì—…ì€ ì–´ë•Œìš”?</h3>
            <div id="job-buttons" class="flex flex-wrap justify-center gap-3">
                <!-- ì¶”ì²œ ì§ì—… ë²„íŠ¼ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ --></div>
        </div>

        <!-- 4. ì´ë¯¸ì§€ ìƒì„± í™”ë©´ --><div id="image-gen-screen" class="hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-2">
                <span id="selected-job" class="text-blue-600"></span>
                (ì´)ê°€ ëœ ë‚˜ì˜ ëª¨ìŠµ!
            </h2>
            <p class="text-xl text-gray-600 mb-6">ì„±ë³„ì„ ê³ ë¥´ê³  'ê·¸ë¦¼ ë§Œë“¤ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
            
            <!-- ì„±ë³„ ì„ íƒ --><div id="gender-buttons" class="mb-6">
                <button class="gender-btn btn bg-blue-400 hover:bg-blue-500" data-gender="ë‚¨ì">
                    ğŸ‘¦ ë‚¨ì
                </button>
                <button class="gender-btn btn bg-pink-400 hover:bg-pink-500" data-gender="ì—¬ì">
                    ğŸ‘§ ì—¬ì
                </button>
            </div>

            <!-- ê·¸ë¦¼ ìƒì„± ë²„íŠ¼ --><button id="generate-btn" class="btn bg-gray-400 text-2xl px-8 py-3" disabled>
                ğŸ¨ ê·¸ë¦¼ ë§Œë“¤ê¸°!
            </button>

            <!-- ë¡œë”© ë° ê²°ê³¼ í‘œì‹œ --><div id="image-result-area" class="mt-8">
                <!-- ë¡œë” --><div id="loader" class="hidden loader mx-auto"></div>
                <!-- ì—ëŸ¬ ë©”ì‹œì§€ --><p id="error-message" class="hidden text-red-500 text-lg"></p>
                <!-- ê²°ê³¼ ì´ë¯¸ì§€ --><img id="result-image" src="" alt="ë¯¸ë˜ ì§ì—… ì´ë¯¸ì§€" class="hidden rounded-2xl shadow-lg mx-auto w-full max-w-md">
            </div>
            
            <button id="restart-btn" class="btn bg-gray-400 hover:bg-gray-500 mt-8">
                ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

<script type="module">
      // --- í™”ë©´ ìš”ì†Œë“¤ ---
      const welcomeScreen = document.getElementById('welcome-screen');
      const quizScreen = document.getElementById('quiz-screen');
      const resultScreen = document.getElementById('result-screen');
      const imageGenScreen = document.getElementById('image-gen-screen');

      const startBtn = document.getElementById('start-btn');
      const questionNumber = document.getElementById('question-number');
      const questionText = document.getElementById('question-text');
      const answerButtons = document.getElementById('answer-buttons');
      const progressBar = document.getElementById('progress');

      const resultType = document.getElementById('result-type');
      const resultDescription = document.getElementById('result-description');
      const jobButtons = document.getElementById('job-buttons');

      const selectedJobText = document.getElementById('selected-job');
      const genderButtons = document.querySelectorAll('.gender-btn');
      const generateBtn = document.getElementById('generate-btn');
      const loader = document.getElementById('loader');
      const errorMessage = document.getElementById('error-message');
      const resultImage = document.getElementById('result-image');
      const restartBtn = document.getElementById('restart-btn');

      // --- í€´ì¦ˆ ë°ì´í„° (MBTI 16ìœ í˜• ê¸°ë°˜) ---
      
      // 16ê°€ì§€ ìœ í˜•ë³„ ë³„ëª… ë° ì„¤ëª…
      const descriptions = {
          'ISTJ': { nickname: 'ì„±ì‹¤í•œ ëª¨ë²”ìƒ ğŸ§‘â€ğŸ«', desc: 'ì±…ì„ê°ì´ ê°•í•˜ê³  ë§¡ì€ ì¼ì„ ê¾¸ì¤€íˆ í•´ë‚´ëŠ” ì„±ì‹¤í•œ ì¹œêµ¬ì˜ˆìš”! ê·œì¹™ì„ ì˜ ì§€í‚¤ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•´ìš”.' },
          'ISFJ': { nickname: 'ë‹¤ì •í•œ ë•ê¸° ìš”ì • ğŸ§š', desc: 'ì¡°ìš©í•˜ê³  ì°¨ë¶„í•˜ì§€ë§Œ, ì¹œêµ¬ë“¤ì„ ë•ëŠ” ì¼ì— ê°€ì¥ ë¨¼ì € ë‚˜ì„œëŠ” ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì¡Œì–´ìš”.' },
          'INFJ': { nickname: 'ë”°ëœ»í•œ ì˜ˆì–¸ê°€ ğŸ”®', desc: 'ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ˆìŒì„ ì˜ ì´í•´í•˜ê³ , ë” ì¢‹ì€ ì„¸ìƒì„ ë§Œë“¤ê¸° ìœ„í•´ ê¹Šì´ ìƒê°í•˜ëŠ” ì¹œêµ¬ì˜ˆìš”.' },
          'INTJ': { nickname: 'ë˜‘ë˜‘í•œ ì „ëµê°€ ğŸ§ ', desc: 'í˜¸ê¸°ì‹¬ì´ ë§ê³  ë˜‘ë˜‘í•´ìš”! ë³µì¡í•œ ë¬¸ì œë„ ë…¼ë¦¬ì ìœ¼ë¡œ ì°©ì°© í•´ê²°í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•´ìš”.' },
          'ISTP': { nickname: 'ë§ŒëŠ¥ ì¬ì£¼ê¾¼ ğŸ› ï¸', desc: 'ì†ì¬ì£¼ê°€ ì¢‹ê³  ë„êµ¬ë¥¼ ì˜ ë‹¤ë¤„ìš”. ì§ì ‘ ë¬´ì–¸ê°€ë¥¼ ë§Œë“¤ê³  íƒí—˜í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•´ìš”.' },
          'ISFP': { nickname: 'ë§ˆìŒ ë”°ëœ»í•œ ì˜ˆìˆ ê°€ ğŸ¨', desc: 'ê²¸ì†í•˜ê³  ë§ˆìŒì´ ë”°ëœ»í•´ìš”. ì•„ë¦„ë‹¤ìš´ ê²ƒì„ ì¢‹ì•„í•˜ê³ , ì˜ˆìˆ ì ì¸ ê°ê°ì´ ë›°ì–´ë‚˜ìš”.' },
          'INFP': { nickname: 'ê¿ˆê¾¸ëŠ” ì´ìƒê°€ ëª½ìƒê°€ ğŸŒˆ', desc: 'ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ì°©í•´ìš”. ìì‹ ë§Œì˜ ê¿ˆê³¼ ê°€ì¹˜ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ì¹œêµ¬ì˜ˆìš”.' },
          'INTP': { nickname: 'ì•„ì´ë””ì–´ ë±…í¬ ğŸ’¡', desc: 'ì¡°ìš©í•˜ì§€ë§Œ ë¨¸ë¦¿ì†ì€ ì•„ì´ë””ì–´ë¡œ ê°€ë“ ì°¨ ìˆì–´ìš”! ë…¼ë¦¬ì ìœ¼ë¡œ ìƒê°í•˜ê³  ë¶„ì„í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•´ìš”.' },
          'ESTP': { nickname: 'í™œë°œí•œ íƒí—˜ê°€ ğŸ‚', desc: 'ì—ë„ˆì§€ê°€ ë„˜ì¹˜ê³  í™œë™ì ì´ì—ìš”! ì¹œêµ¬ë“¤ê³¼ ì–´ìš¸ë¦¬ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê³ , ìƒˆë¡œìš´ ì¼ì— ë„ì „í•˜ëŠ” ê²ƒì„ ì¦ê²¨ìš”.' },
          'ESFP': { nickname: 'ììœ ë¡œìš´ ìŠˆí¼ìŠ¤íƒ€ ğŸŒŸ', desc: 'ì–¸ì œë‚˜ ë°ê³  ì¸ê¸°ê°€ ë§ì•„ìš”! ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ëŠ” ê²ƒì„ ê°€ì¥ ì¢‹ì•„í•´ìš”.' },
          'ENFP': { nickname: 'ë°˜ì§ì´ëŠ” í™œë™ê°€ âœ¨', desc: 'ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ì—´ì •ì´ ë„˜ì³ìš”! ìƒˆë¡œìš´ ì¹œêµ¬ ì‚¬ê·€ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê³ , ì¬ë°ŒëŠ” ì¼ì„ ì°¾ì•„ë‹¤ë…€ìš”.' },
          'ENTP': { nickname: 'ëœ¨ê±°ìš´ í† ë¡ ê°€ ğŸ”¥', desc: 'ë§í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê³ , ë˜‘ë˜‘í•œ ì¥ë‚œê¾¸ëŸ¬ê¸°ì˜ˆìš”. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¡œ í† ë¡ í•˜ëŠ” ê²ƒì„ ì¦ê²¨ìš”.' },
          'ESTJ': { nickname: 'ë¯¿ìŒì§í•œ ë°˜ì¥ ğŸ§‘â€âš–ï¸', desc: 'ì±…ì„ê°ì´ ê°•í•˜ê³  ê³„íšì„ ì˜ ì„¸ì›Œìš”. ì¹œêµ¬ë“¤ì„ ì´ëŒê³  ê·œì¹™ì„ ì˜ ì§€í‚¤ëŠ” í›Œë¥­í•œ ë¦¬ë”ì˜ˆìš”.' },
          'ESFJ': { nickname: 'ì¹œì ˆí•œ ë¶„ìœ„ê¸° ë©”ì´ì»¤ ğŸ’–', desc: 'ì¹œì ˆí•˜ê³  ì¹œêµ¬ë“¤ì„ ì˜ ì±™ê²¨ìš”. ë‹¤ë¥¸ ì‚¬ëŒì„ ë•ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê³ , ì£¼ë³€ ë¶„ìœ„ê¸°ë¥¼ ë°ê²Œ ë§Œë“¤ì–´ìš”.' },
          'ENFJ': { nickname: 'ì •ì˜ë¡œìš´ ì£¼ì¸ê³µ ğŸ¦¸', desc: 'ì¹œêµ¬ë“¤ì—ê²Œ ê´€ì‹¬ì´ ë§ê³ , ë‹¤ë¥¸ ì‚¬ëŒì„ ë•ê¸° ìœ„í•´ ì•ì¥ì„œëŠ” ì •ì˜ë¡­ê³  ë”°ëœ»í•œ ë¦¬ë”ì˜ˆìš”.' },
          'ENTJ': { nickname: 'ëŒ€ë‹´í•œ ì§€íœ˜ê´€ ğŸ–ï¸', desc: 'ìì‹ ê°ì´ ë„˜ì¹˜ê³ , ì¹œêµ¬ë“¤ì„ ì´ë„ëŠ” ê²ƒì„ ì˜í•´ìš”. í° ê¿ˆì„ ê°–ê³  ë„ì „í•˜ëŠ” ê²ƒì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šì•„ìš”.' }
      };
      
      // 20ê°œ í€´ì¦ˆ ì§ˆë¬¸ (E/I, S/N, T/F, J/P ê° 5ê°œ)
      const questions = [
          // E (ì™¸í–¥) vs I (ë‚´í–¥)
          { question: 'ì£¼ë§ì— ë­ í•˜ê³  ì‹¶ì–´?', answers: [{ text: 'ì¹œêµ¬ë“¤ê³¼ ë°–ì—ì„œ ì‹ ë‚˜ê²Œ ë†€ê¸°', type: 'E' }, { text: 'ì§‘ì—ì„œ ì¡°ìš©íˆ ì±… ì½ê±°ë‚˜ ê·¸ë¦¼ ê·¸ë¦¬ê¸°', type: 'I' }] },
          { question: 'ìˆ˜ì—…ì‹œê°„ì— ë‚˜ëŠ”?', answers: [{ text: 'ì†ë“¤ê³  í° ì†Œë¦¬ë¡œ ë°œí‘œí•˜ëŠ” í¸', type: 'E' }, { text: 'ì¡°ìš©íˆ ë“£ê³  ì†ìœ¼ë¡œ ìƒê°í•˜ëŠ” í¸', type: 'I' }] },
          { question: 'ìƒˆë¡œìš´ ì¹œêµ¬ë¥¼ ë§Œë‚¬ì„ ë•Œ', answers: [{ text: 'ë‚´ê°€ ë¨¼ì € ë‹¤ê°€ê°€ì„œ ë§ì„ ê±´ë‹¤', type: 'E' }, { text: 'ì¹œêµ¬ê°€ ë¨¼ì € ë§ì„ ê±¸ì–´ì£¼ê¸¸ ê¸°ë‹¤ë¦°ë‹¤', type: 'I' }] },
          { question: 'ìƒì¼ íŒŒí‹°ë¥¼ í•œë‹¤ë©´?', answers: [{ text: 'ì¹œêµ¬ë“¤ì„ ë§ì´ ë¶ˆëŸ¬ì„œ ì‹œëŒë²…ì í•˜ê²Œ!', type: 'E' }, { text: 'ì¹œí•œ ì¹œêµ¬ ëª‡ ëª…ê³¼ ì¡°ìš©í•˜ê²Œ!', type: 'I' }] },
          { question: 'í˜ë“¤ ë•Œ ê¸°ë¶„ì´ í’€ë¦¬ëŠ” ë²•ì€?', answers: [{ text: 'ì¹œêµ¬ë“¤ê³¼ ìˆ˜ë‹¤ ë–¨ê¸°', type: 'E' }, { text: 'í˜¼ìë§Œì˜ ì‹œê°„ ê°–ê¸°', type: 'I' }] },
          // S (ê°ê°) vs N (ì§ê´€)
          { question: 'ì´ì•¼ê¸°ë¥¼ ë“¤ì„ ë•Œ ë” ì¬ë¯¸ìˆëŠ” ê²ƒì€?', answers: [{ text: 'ì§„ì§œ ìˆì—ˆë˜ ì¼, ìì„¸í•œ ì´ì•¼ê¸°', type: 'S' }, { text: 'ì•ìœ¼ë¡œ ì¼ì–´ë‚  ì¼, ìƒìƒ ì† ì´ì•¼ê¸°', type: 'N' }] },
          { question: 'ìƒˆë¡œìš´ ì¥ë‚œê°ì´ ìƒê¸°ë©´?', answers: [{ text: 'ì„¤ëª…ì„œë¥¼ ê¼¼ê¼¼íˆ ë³´ê³  ë”°ë¼ ë§Œë“ ë‹¤', type: 'S' }, { text: 'ì„¤ëª…ì„œ ì—†ì´ ë‚´ ë§˜ëŒ€ë¡œ ìƒˆë¡­ê²Œ ë§Œë“ ë‹¤', type: 'N' }] },
          { question: 'ë™í™”ì±…ì„ ì½ì„ ë•Œ ë‚˜ëŠ”?', answers: [{ text: 'ê·¸ë¦¼ì„ ìì„¸íˆ ì‚´í´ë³¸ë‹¤', type: 'S' }, { text: 'ë‹¤ìŒì— ì–´ë–»ê²Œ ë ì§€ ìƒìƒí•´ë³¸ë‹¤', type: 'N' }] },
          { question: 'ê¸¸ì„ ê±¸ì„ ë•Œ ë‚˜ëŠ”?', answers: [{ text: 'ê°„íŒì´ë‚˜ ì˜ˆìœ ê½ƒì„ êµ¬ê²½í•œë‹¤', type: 'S' }, { text: 'ë‹¤ë¥¸ ìƒê°ì´ë‚˜ ê³µìƒì— ë¹ ì§„ë‹¤', type: 'N' }] },
          { question: 'ë” ì¢‹ì•„í•˜ëŠ” ì¹­ì°¬ì€?', answers: [{ text: '"ê·¸ë¦¼ì„ ê¼¼ê¼¼í•˜ê²Œ ì˜ ê·¸ë ¸ë„¤!"', type: 'S' }, { text: '"ê·¸ë¦¼ ì•„ì´ë””ì–´ê°€ ì •ë§ ìƒˆë¡­ë‹¤!"', type: 'N' }] },
          // T (ì‚¬ê³ ) vs F (ê°ì •)
          { question: 'ì¹œêµ¬ê°€ ë„˜ì–´ì¡Œì„ ë•Œ ë‚˜ì˜ ì²«ë§ˆë””ëŠ”?', answers: [{ text: '"ì–´ë”” ë‹¤ì³¤ì–´? í”¼ ë‚˜?" (ìƒí™© íŒŒì•…)', type: 'T' }, { text: '"ì–´ë–¡í•´! ë§ì´ ì•„í”„ê² ë‹¤!" (ê³µê°)', type: 'F' }] },
          { question: 'ìˆ™ì œë¥¼ í•  ë•Œ ë” ì¤‘ìš”í•œ ê²ƒì€?', answers: [{ text: 'í‹€ë¦° ê²ƒ ì—†ì´ ì •í™•í•˜ê²Œ í•˜ëŠ” ê²ƒ', type: 'T' }, { text: 'ì„ ìƒë‹˜ ë§ˆìŒì— ë“¤ê²Œ ì˜ˆì˜ê²Œ í•˜ëŠ” ê²ƒ', type: 'F' }] },
          { question: 'ì¹œêµ¬ì™€ ë‹¤í‰œì„ ë•Œ', answers: [{ text: 'ëˆ„ê°€ ì˜ëª»í–ˆëŠ”ì§€ ë”°ì ¸ë³¸ë‹¤', type: 'T' }, { text: 'ì¹œêµ¬ê°€ ìƒì²˜ë°›ì•˜ì„ê¹Œ ë´ ê±±ì •ëœë‹¤', type: 'F' }] },
          { question: 'ë” ê¸°ë¶„ ì¢‹ì€ ë§ì€?', answers: [{ text: '"ë„ˆ ì •ë§ ë˜‘ë˜‘í•˜ë‹¤!"', type: 'T' }, { text: '"ë„ˆ ì •ë§ ì°©í•˜ë‹¤!"', 'type': 'F' }] },
          { question: 'ê²Œì„ì„ í•  ë•Œ ë‚˜ëŠ”?', answers: [{ text: 'ì´ê¸°ëŠ” ê²Œ ì œì¼ ì¤‘ìš”í•˜ë‹¤', type: 'T' }, { text: 'ë‹¤ ê°™ì´ ì¬ë¯¸ìˆëŠ” ê²Œ ë” ì¤‘ìš”í•˜ë‹¤', type: 'F' }] },
          // J (íŒë‹¨) vs P (ì¸ì‹)
          { question: 'ë°©í•™ ìˆ™ì œëŠ”?', answers: [{ text: 'ê³„íší‘œë¥¼ ì§œì„œ ë§¤ì¼ ì¡°ê¸ˆì”© ë¯¸ë¦¬ í•œë‹¤', type: 'J' }, { text: 'ë§ˆì§€ë§‰ ë‚ ì— ëª°ì•„ì„œ í•œë‹¤', type: 'P' }] },
          { question: 'ë‚´ ë°©ì€?', answers: [{ text: 'ë¬¼ê±´ì´ ì œìë¦¬ì— ì •ë¦¬ë˜ì–´ ìˆë‹¤', type: 'J' }, { text: 'ììœ ë¡­ê²Œ ë†“ì—¬ ìˆì§€ë§Œ ì–´ë”” ìˆëŠ”ì§€ ë‹¤ ì•ˆë‹¤', type: 'P' }] },
          { question: 'ì—¬í–‰ì„ ê°„ë‹¤ë©´?', answers: [{ text: 'ê°ˆ ê³³ì„ ë¯¸ë¦¬ ë‹¤ ì •í•´ë†“ê³  ê°„ë‹¤', type: 'J' }, { text: 'ê·¸ë•Œê·¸ë•Œ ë°œê¸¸ ë‹¿ëŠ” ëŒ€ë¡œ ë‹¤ë‹Œë‹¤', type: 'P' }] },
          { question: 'ì¹œêµ¬ì™€ ì•½ì†ì„ ì¡ì„ ë•Œ', answers: [{ text: 'ì‹œê°„ê³¼ ì¥ì†Œë¥¼ ì •í™•í•˜ê²Œ ì •í•˜ëŠ” ê²Œ í¸í•˜ë‹¤', type: 'J' }, { text: '"ê·¸ë•Œ ë§Œë‚˜!" ì²˜ëŸ¼ í¸í•˜ê²Œ ì •í•˜ëŠ” ê²Œ ì¢‹ë‹¤', type: 'P' }] },
          { question: 'ë” í¸í•œ ê²ƒì€?', answers: [{ text: 'í•  ì¼ì„ ë¯¸ë¦¬ ëë‚´ê³  ì‰¬ëŠ” ê²ƒ', type: 'J' }, { text: 'ë†€ë‹¤ê°€ ë§ˆì§€ë§‰ì— í•  ì¼ì„ í•˜ëŠ” ê²ƒ', type: 'P' }] }
      ];

      // 16ê°€ì§€ ìœ í˜•ë³„ ì¶”ì²œ ì§ì—… 5ê°€ì§€
      const jobRecommendations = {
          'ISTJ': ['ì‚¬ì„œ', 'íšŒê³„ì‚¬', 'íŒì‚¬', 'ì•½ì‚¬', 'ê±´ì¶•ê°€'],
          'ISFJ': ['ì˜ì‚¬', 'ê°„í˜¸ì‚¬', 'ì„ ìƒë‹˜', 'ì‚¬íšŒë³µì§€ì‚¬', 'ìˆ˜ì˜ì‚¬'],
          'INFJ': ['ìƒë‹´ì‚¬', 'ì‘ê°€', 'ë””ìì´ë„ˆ', 'ì‹¬ë¦¬í•™ì', 'í™˜ê²½ìš´ë™ê°€'],
          'INTJ': ['ê³¼í•™ì', 'í”„ë¡œê·¸ë˜ë¨¸', 'ë³€í˜¸ì‚¬', 'ì—”ì§€ë‹ˆì–´', 'ê²½ì œí•™ì'],
          'ISTP': ['ì†Œë°©ê´€', 'ìš”ë¦¬ì‚¬', 'ìš´ë™ì„ ìˆ˜', 'ì •ë¹„ì‚¬', 'íŒŒì¼ëŸ¿'],
          'ISFP': ['í™”ê°€', 'ê°€ìˆ˜', 'íŒ¨ì…˜ ë””ìì´ë„ˆ', 'ê½ƒì§‘ ì£¼ì¸', 'ë³´ì„ ë””ìì´ë„ˆ'],
          'INFP': ['ì‘ê°€', 'ë§Œí™”ê°€', 'ë°°ìš°', 'ì‚¬ì„œ', 'ìœ ì¹˜ì› ì„ ìƒë‹˜'],
          'INTP': ['í”„ë¡œê·¸ë˜ë¨¸', 'ê³¼í•™ì', 'ë°œëª…ê°€', 'ëŒ€í•™êµìˆ˜', 'ë¹„í‰ê°€'],
          'ESTP': ['ìš´ë™ì„ ìˆ˜', 'ê²½ì°°ê´€', 'ì‚¬ì—…ê°€', 'ìœ íŠœë²„', 'ì‘ê¸‰êµ¬ì¡°ì‚¬'],
          'ESFP': ['ë°°ìš°', 'ê°€ìˆ˜', 'MC(ì§„í–‰ì)', 'ìŠ¹ë¬´ì›', 'ì´ë²¤íŠ¸ ê¸°íšì'],
          'ENFP': ['ìœ íŠœë²„', 'ì‘ê°€', 'ê´‘ê³  ê¸°íšì', 'ë°°ìš°', 'ê¸°ì'],
          'ENTP': ['ë°œëª…ê°€', 'ë³€í˜¸ì‚¬', 'ì˜í™”ê°ë…', 'ê´‘ê³  ê¸°íšì', 'ì •ì¹˜ì¸'],
          'ESTJ': ['ì‚¬ì¥ë‹˜(CEO)', 'íŒì‚¬', 'êµì¥ ì„ ìƒë‹˜', 'ê°ë…', 'ê²½ì°°ê´€'],
          'ESFJ': ['ì„ ìƒë‹˜', 'ê°„í˜¸ì‚¬', 'ìŠ¹ë¬´ì›', 'ë¹„ì„œ', 'íŒŒí‹° í”Œë˜ë„ˆ'],
          'ENFJ': ['ì„ ìƒë‹˜', 'ìƒë‹´ì‚¬', 'ì•„ë‚˜ìš´ì„œ', 'ì‚¬íšŒë³µì§€ì‚¬', 'ì •ì¹˜ì¸'],
          'ENTJ': ['ì‚¬ì¥ë‹˜(CEO)', 'ë³€í˜¸ì‚¬', 'ì˜í™”ê°ë…', 'ì¥êµ°', 'ë°œëª…ê°€']
      };

      // ì§ì—…ë³„ êµ¬ì²´ì ì¸ í™œë™ ë° ë°°ê²½ ì •ë³´ (ì• ë‹ˆë©”ì´ì…˜ ì´ë¯¸ì§€ë¥¼ ìœ„í•´ ì¶”ê°€)
      const jobDetails = {
          'ì‚¬ì„œ': { activity: 'ë„ì„œê´€ì—ì„œ ì±…ì„ ì •ë¦¬í•˜ê³ , ì•„ì´ë“¤ì—ê²Œ ì±…ì„ ì½ì–´ì£¼ëŠ”', background: 'ë°ê³  ì•„ëŠ‘í•œ ë„ì„œê´€' },
          'íšŒê³„ì‚¬': { activity: 'ì±…ìƒì— ì•‰ì•„ ì»´í“¨í„°ë¡œ ìˆ«ìë¥¼ ì •ë¦¬í•˜ëŠ”', background: 'ê¹”ë”í•œ ì‚¬ë¬´ì‹¤' },
          'íŒì‚¬': { activity: 'ë²•ì •ì—ì„œ ì˜ìì— ì•‰ì•„ íŒê²°ì„ ë‚´ë¦¬ëŠ”', background: 'ì—„ìˆ™í•œ ë²•ì •' },
          'ì•½ì‚¬': { activity: 'ì•½êµ­ì—ì„œ ì•½ì„ ì¡°ì œí•˜ê³  í™˜ìì—ê²Œ ì„¤ëª…í•˜ëŠ”', background: 'ë°ê³  ê¹¨ë—í•œ ì•½êµ­' },
          'ê±´ì¶•ê°€': { activity: 'ì„¤ê³„ë„ë©´ì„ í¼ì³ë†“ê³  ì—°í•„ë¡œ ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ”', background: 'ì°½ë¬¸ì´ ë„“ì€ ë””ìì¸ ìŠ¤íŠœë””ì˜¤' },

          'ì˜ì‚¬': { activity: 'ë³‘ì›ì—ì„œ í™˜ìì˜ ì•„í”ˆ ê³³ì„ ì‚´í”¼ëŠ”', background: 'ë”°ëœ»í•œ ë¶„ìœ„ê¸°ì˜ ì§„ë£Œì‹¤' },
          'ê°„í˜¸ì‚¬': { activity: 'í™˜ì ì˜†ì—ì„œ ë¯¸ì†Œ ì§€ìœ¼ë©° ëŒë³´ëŠ”', background: 'ê¹”ë”í•œ ë³‘ì‹¤' },
          'ì„ ìƒë‹˜': { activity: 'ì¹ íŒ ì•ì—ì„œ ì•„ì´ë“¤ì—ê²Œ ì¬ë¯¸ìˆê²Œ ì„¤ëª…í•˜ëŠ”', background: 'í™œê¸°ì°¬ êµì‹¤' },
          'ì‚¬íšŒë³µì§€ì‚¬': { activity: 'í•„ìš”í•œ ì‚¬ëŒë“¤ì„ ì°¾ì•„ê°€ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ì£¼ëŠ”', background: 'ì •ê° ìˆëŠ” ë™ë„¤ ê³¨ëª©' },
          'ìˆ˜ì˜ì‚¬': { activity: 'ì‘ì€ ë™ë¬¼ì„ ë‹¤ì •í•˜ê²Œ ì¹˜ë£Œí•˜ëŠ”', background: 'ì•„ê¸°ìê¸°í•œ ë™ë¬¼ë³‘ì›' },
          
          'ìƒë‹´ì‚¬': { activity: 'í¸ì•ˆí•œ ì˜ìì— ì•‰ì•„ ê³ ë¯¼ì„ ë“¤ì–´ì£¼ëŠ”', background: 'ì¡°ìš©í•˜ê³  ì•ˆë½í•œ ìƒë‹´ì‹¤' },
          'ì‘ê°€': { activity: 'ì°½ê°€ì— ì•‰ì•„ ë…¸íŠ¸ë¶ìœ¼ë¡œ ì´ì•¼ê¸°ë¥¼ ì“°ëŠ”', background: 'ë”°ëœ»í•œ ì„œì¬' },
          'ë””ìì´ë„ˆ': { activity: 'ì»´í“¨í„°ë¡œ ìƒˆë¡œìš´ ì˜·ì´ë‚˜ ë¬¼ê±´ì„ ë””ìì¸í•˜ëŠ”', background: 'ê°ê°ì ì¸ ë””ìì¸ ìŠ¤íŠœë””ì˜¤' },
          'ì‹¬ë¦¬í•™ì': { activity: 'ì‚¬ëŒì˜ ë§ˆìŒì„ ê·¸ë¦¼ìœ¼ë¡œ ë¶„ì„í•˜ëŠ”', background: 'ì°¨ë¶„í•œ ì—°êµ¬ì‹¤' },
          'í™˜ê²½ìš´ë™ê°€': { activity: 'ìˆ²ì—ì„œ ë‚˜ë¬´ë¥¼ ì‹¬ê³  ìì—°ì„ ëŒë³´ëŠ”', background: 'í‘¸ë¥¸ ìˆ² ì†' },

          'ê³¼í•™ì': { activity: 'ì‹¤í—˜ì‹¤ì—ì„œ ë¹„ì»¤ì™€ ì‹œí—˜ê´€ìœ¼ë¡œ ì‹¤í—˜í•˜ëŠ”', background: 'ì²¨ë‹¨ ì¥ë¹„ê°€ ìˆëŠ” ì—°êµ¬ì‹¤' },
          'í”„ë¡œê·¸ë˜ë¨¸': { activity: 'ì»´í“¨í„° í™”ë©´ì„ ë³´ë©° ì½”ë“œë¥¼ ì…ë ¥í•˜ëŠ”', background: 'ëª¨ë‹ˆí„°ê°€ ë§ì€ ì‘ì—… ê³µê°„' },
          'ë³€í˜¸ì‚¬': { activity: 'ì„œë¥˜ë¥¼ ê²€í† í•˜ë©° ì§„ì§€í•˜ê²Œ ìƒê°í•˜ëŠ”', background: 'ì±…ì´ ê°€ë“í•œ ì‚¬ë¬´ì‹¤' },
          'ì—”ì§€ë‹ˆì–´': { activity: 'ë³µì¡í•œ ê¸°ê³„ë¥¼ ì¡°ë¦½í•˜ê±°ë‚˜ ê³ ì¹˜ëŠ”', background: 'ë‹¤ì–‘í•œ ê³µêµ¬ê°€ ìˆëŠ” ì‘ì—…ì¥' },
          'ê²½ì œí•™ì': { activity: 'ë³µì¡í•œ ê·¸ë˜í”„ë¥¼ ë³´ë©° ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ëŠ”', background: 'ë†’ì€ ë¹Œë”©ì˜ ì‚¬ë¬´ì‹¤' },

          'ì†Œë°©ê´€': { activity: 'í™”ì¬ í˜„ì¥ì—ì„œ ìš©ê°í•˜ê²Œ ë¶ˆì„ ë„ëŠ”', background: 'ì—°ê¸°ê°€ ììš±í•œ ê±´ë¬¼ ì•' },
          'ìš”ë¦¬ì‚¬': { activity: 'ì£¼ë°©ì—ì„œ ë§›ìˆëŠ” ìŒì‹ì„ ë§Œë“œëŠ”', background: 'í™œê¸°ì°¬ ì£¼ë°©' },
          'ìš´ë™ì„ ìˆ˜': { activity: 'ê²½ê¸°ì¥ì—ì„œ ë•€ í˜ë¦¬ë©° í›ˆë ¨í•˜ëŠ”', background: 'ë„“ì€ ìš´ë™ì¥' },
          'ì •ë¹„ì‚¬': { activity: 'ê³ ì¥ ë‚œ ì°¨ë¥¼ ê¼¼ê¼¼í•˜ê²Œ ê³ ì¹˜ëŠ”', background: 'ê³µêµ¬ê°€ ë§ì€ ì •ë¹„ì†Œ' },
          'íŒŒì¼ëŸ¿': { activity: 'ì¡°ì¢…ì„ì—ì„œ ë¹„í–‰ê¸°ë¥¼ ìš´ì „í•˜ëŠ”', background: 'êµ¬ë¦„ ìœ„ ë¹„í–‰ê¸° ì¡°ì¢…ì„' },

          'í™”ê°€': { activity: 'ì´ì ¤ ì•ì—ì„œ ë¶“ìœ¼ë¡œ ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ”', background: 'í–‡ì‚´ì´ ë¹„ì¹˜ëŠ” í™”ì‹¤' },
          'ê°€ìˆ˜': { activity: 'ë¬´ëŒ€ ìœ„ì—ì„œ ë§ˆì´í¬ë¥¼ ë“¤ê³  ë…¸ë˜í•˜ëŠ”', background: 'í™”ë ¤í•œ ì½˜ì„œíŠ¸ ë¬´ëŒ€' },
          'íŒ¨ì…˜ ë””ìì´ë„ˆ': { activity: 'ì˜·ê°ì„ ì¬ë‹¨í•˜ê³  ì¬ë´‰í‹€ë¡œ ì˜·ì„ ë§Œë“œëŠ”', background: 'ì„¸ë ¨ëœ íŒ¨ì…˜ ìŠ¤íŠœë””ì˜¤' },
          'ê½ƒì§‘ ì£¼ì¸': { activity: 'ì˜ˆìœ ê½ƒë“¤ ì‚¬ì´ì—ì„œ ê½ƒë‹¤ë°œì„ ë§Œë“œëŠ”', background: 'í–¥ê¸‹í•œ ê½ƒì§‘' },
          'ë³´ì„ ë””ìì´ë„ˆ': { activity: 'ì‘ì€ ë³´ì„ì„ ì„¬ì„¸í•˜ê²Œ ì„¸ê³µí•˜ëŠ”', background: 'ë°˜ì§ì´ëŠ” ë³´ì„ ê³µë°©' },

          'ë§Œí™”ê°€': { activity: 'íœìœ¼ë¡œ íƒœë¸”ë¦¿ì— ë§Œí™”ë¥¼ ê·¸ë¦¬ëŠ”', background: 'ì•„ê¸°ìê¸°í•œ ì‘ì—…ì‹¤' },
          'ë°°ìš°': { activity: 'ë¬´ëŒ€ ìœ„ì—ì„œ ë©‹ì§„ ì—°ê¸°ë¥¼ í¼ì¹˜ëŠ”', background: 'ë°ì€ ì¡°ëª…ì˜ ì—°ê·¹ ë¬´ëŒ€' },
          'ìœ ì¹˜ì› ì„ ìƒë‹˜': { activity: 'ì•„ì´ë“¤ê³¼ í•¨ê»˜ ë…¸ë˜ ë¶€ë¥´ë©° ë†€ì•„ì£¼ëŠ”', background: 'ìƒ‰ìƒ‰ê¹”ì˜ ìœ ì¹˜ì› êµì‹¤' },
          'ë¹„í‰ê°€': { activity: 'ì±…ìƒì— ì•‰ì•„ ì˜í™”ë‚˜ ì±…ì— ëŒ€í•´ ê¸€ì„ ì“°ëŠ”', background: 'ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì„œì¬' },

          'ë°œëª…ê°€': { activity: 'ê¸°ë°œí•œ ì•„ì´ë””ì–´ë¡œ ìƒˆë¡œìš´ ì¥ì¹˜ë¥¼ ë§Œë“œëŠ”', background: 'ì˜¨ê°– ë„êµ¬ë¡œ ê°€ë“ ì°¬ ì‹¤í—˜ì‹¤' },
          'ëŒ€í•™êµìˆ˜': { activity: 'í•™ìƒë“¤ì—ê²Œ ì–´ë ¤ìš´ ë‚´ìš©ì„ ì‰½ê³  ì¬ë¯¸ìˆê²Œ ê°€ë¥´ì¹˜ëŠ”', background: 'ë†’ì€ ê°•ë‹¨ì´ ìˆëŠ” ê°•ì˜ì‹¤' },
          
          'ê²½ì°°ê´€': { activity: 'ë„ë¡œì—ì„œ êµí†µ ì •ë¦¬ë¥¼ í•˜ê±°ë‚˜ ìˆœì°°í•˜ëŠ”', background: 'í™œê¸°ì°¬ ë„ì‹œ ê±°ë¦¬' },
          'ì‚¬ì—…ê°€': { activity: 'ì‚¬ëŒë“¤ê³¼ í™œë°œí•˜ê²Œ íšŒì˜í•˜ë©° ìƒˆë¡œìš´ ê³„íšì„ ì„¸ìš°ëŠ”', background: 'ì„¸ë ¨ëœ íšŒì˜ì‹¤' },
          'ìœ íŠœë²„': { activity: 'ì¹´ë©”ë¼ ì•ì—ì„œ ì¬ë¯¸ìˆëŠ” ì˜ìƒì„ ì´¬ì˜í•˜ëŠ”', background: 'ì¡°ëª…ì´ ì„¤ì¹˜ëœ ìŠ¤íŠœë””ì˜¤' },
          'ì‘ê¸‰êµ¬ì¡°ì‚¬': { activity: 'ìœ„ê¸‰í•œ í™˜ìë¥¼ ì¹¨ì°©í•˜ê²Œ ë•ëŠ”', background: 'ì‚ë½€ì‚ë½€ êµ¬ê¸‰ì°¨ ì˜†' },

          'MC(ì§„í–‰ì)': { activity: 'ë°©ì†¡ ìŠ¤íŠœë””ì˜¤ì—ì„œ í™œê¸°ì°¨ê²Œ í”„ë¡œê·¸ë¨ì„ ì§„í–‰í•˜ëŠ”', background: 'í™”ë ¤í•œ ë°©ì†¡ ìŠ¤íŠœë””ì˜¤' },
          'ìŠ¹ë¬´ì›': { activity: 'ë¹„í–‰ê¸° ì•ˆì—ì„œ ìŠ¹ê°ë“¤ì„ ì¹œì ˆí•˜ê²Œ ì•ˆë‚´í•˜ëŠ”', background: 'ê¹¨ë—í•œ ë¹„í–‰ê¸° ë‚´ë¶€' },
          'ì´ë²¤íŠ¸ ê¸°íšì': { activity: 'íŒŒí‹°ë‚˜ í–‰ì‚¬ë¥¼ ë©‹ì§€ê²Œ ì¤€ë¹„í•˜ëŠ”', background: 'í™”ë ¤í•˜ê²Œ ê¾¸ë©°ì§„ ì´ë²¤íŠ¸ í™€' },

          'ê´‘ê³  ê¸°íšì': { activity: 'ìƒˆë¡œìš´ ê´‘ê³  ì•„ì´ë””ì–´ë¥¼ ìŠ¤ì¼€ì¹˜í•˜ëŠ”', background: 'ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ íšŒì˜ì‹¤' },
          'ê¸°ì': { activity: 'í˜„ì¥ì—ì„œ ì†Œì‹ì„ ì·¨ì¬í•˜ê³  ê¸°ë¡í•˜ëŠ”', background: 'ë§ì€ ì‚¬ëŒë“¤ì´ ëª¨ì¸ í˜„ì¥' },
          'ì •ì¹˜ì¸': { activity: 'ë§ì€ ì‚¬ëŒë“¤ ì•ì—ì„œ ì—°ì„¤í•˜ëŠ”', background: 'ì²­ì¤‘ì´ ê°€ë“í•œ ê°•ë‹¹' },

          'êµì¥ ì„ ìƒë‹˜': { activity: 'êµì¥ì‹¤ì—ì„œ í•™êµì˜ ì¤‘ìš”í•œ ì¼ì„ ê²°ì •í•˜ëŠ”', background: 'í’ˆìœ„ ìˆëŠ” êµì¥ì‹¤' },
          'ê°ë…': { activity: 'ì´¬ì˜ í˜„ì¥ì—ì„œ ë°°ìš°ë“¤ì„ ì§€íœ˜í•˜ëŠ”', background: 'ì˜í™” ì´¬ì˜ í˜„ì¥' },

          'ë¹„ì„œ': { activity: 'ìƒì‚¬ì˜ ì—…ë¬´ë¥¼ ê¼¼ê¼¼í•˜ê²Œ ë•ëŠ”', background: 'ë‹¨ì •í•˜ê³  íš¨ìœ¨ì ì¸ ì‚¬ë¬´ì‹¤' },
          'íŒŒí‹° í”Œë˜ë„ˆ': { activity: 'ì•„ë¦„ë‹¤ìš´ ì†Œí’ˆë“¤ë¡œ íŒŒí‹°ì¥ì„ ê¾¸ë¯¸ëŠ”', background: 'í™”ë ¤í•˜ê²Œ ì¥ì‹ëœ íŒŒí‹°ì¥' },

          'ì•„ë‚˜ìš´ì„œ': { activity: 'ë‰´ìŠ¤ ìŠ¤íŠœë””ì˜¤ì—ì„œ ì •í™•í•œ ì†Œì‹ì„ ì „ë‹¬í•˜ëŠ”', background: 'ê¹”ë”í•œ ë‰´ìŠ¤ ìŠ¤íŠœë””ì˜¤' },
          
          'ì¥êµ°': { activity: 'ì§€íœ˜ì‹¤ì—ì„œ ì‘ì „ì„ ì„¸ìš°ëŠ”', background: 'ì „ëµ ì§€ë„ì™€ ë¬´ì „ê¸°ê°€ ìˆëŠ” ì§€íœ˜ì‹¤' }
      };


      let currentQuestionIndex = 0;
      let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

      // --- í€´ì¦ˆ ë¡œì§ ---

      startBtn.addEventListener('click', startQuiz);
      restartBtn.addEventListener('click', () => {
          // ëª¨ë“  ê°’ ì´ˆê¸°í™”
          currentQuestionIndex = 0;
          scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
          selectedJob = null;
          selectedGender = null;
          
          // ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™”
          generateBtn.disabled = true;
          generateBtn.classList.add('bg-gray-400');
          generateBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
          genderButtons.forEach(btn => btn.classList.remove('ring-4', 'ring-offset-2', 'ring-indigo-500'));
          
          // ì´ë¯¸ì§€ ë° ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
          resultImage.classList.add('hidden');
          resultImage.src = '';
          errorMessage.classList.add('hidden');
          loader.classList.add('hidden');
          
          // í™”ë©´ ì „í™˜
          showScreen(welcomeScreen);
      });
      
      // í™”ë©´ ì „í™˜ í•¨ìˆ˜
      function showScreen(screen) {
          welcomeScreen.classList.add('hidden');
          quizScreen.classList.add('hidden');
          resultScreen.classList.add('hidden');
          imageGenScreen.classList.add('hidden');
          screen.classList.remove('hidden');
      }

      // í€´ì¦ˆ ì‹œì‘
      function startQuiz() {
          currentQuestionIndex = 0;
          scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
          showScreen(quizScreen);
          showQuestion();
      }

      // ì§ˆë¬¸ ë³´ì—¬ì£¼ê¸°
      function showQuestion() {
          if (currentQuestionIndex >= questions.length) {
              showResult();
              return;
          }
          
          const q = questions[currentQuestionIndex];
          questionNumber.textContent = `ì§ˆë¬¸ ${currentQuestionIndex + 1}/${questions.length}`;
          questionText.textContent = q.question;
          answerButtons.innerHTML = '';
          
          // ì§„í–‰ë„ ì—…ë°ì´íŠ¸
          progressBar.style.width = `${((currentQuestionIndex) / questions.length) * 100}%`;
          
          // 2ê°œì˜ ë‹µë³€ ë²„íŠ¼ ìƒì„±
          const colors = ['bg-blue-500', 'bg-red-500'];
          const hoverColors = ['hover:bg-blue-600', 'hover:bg-red-600'];
          
          q.answers.forEach((answer, index) => {
              const button = document.createElement('button');
              button.textContent = answer.text;
              button.classList.add('answer-btn', colors[index % 2], hoverColors[index % 2]);
              button.dataset.type = answer.type;
              button.addEventListener('click', selectAnswer);
              answerButtons.appendChild(button);
          });
      }

      // ë‹µë³€ ì„ íƒ
      function selectAnswer(e) {
          const selectedType = e.target.dataset.type;
          scores[selectedType]++;
          currentQuestionIndex++;
          showQuestion();
      }

      // ê²°ê³¼ ë³´ì—¬ì£¼ê¸° (ë¡œì§ ìˆ˜ì •)
      function showResult() {
          progressBar.style.width = '100%'; // í€´ì¦ˆ ì™„ë£Œ
          
          // MBTI ìœ í˜• ê³„ì‚° (ë™ì ì¼ ê²½ìš° I, N, F, P ì„ í˜¸)
          let finalType = '';
          finalType += (scores.E > scores.I) ? 'E' : 'I';
          finalType += (scores.S > scores.N) ? 'S' : 'N';
          finalType += (scores.T > scores.F) ? 'T' : 'F';
          finalType += (scores.J > scores.P) ? 'J' : 'P';
          
          const resultData = descriptions[finalType];
          
          // ê²°ê³¼ í™”ë©´ ì±„ìš°ê¸°
          resultType.textContent = `${finalType} (${resultData.nickname})`;
          resultDescription.textContent = resultData.desc;
          jobButtons.innerHTML = '';
          
          // ì¶”ì²œ ì§ì—… ë²„íŠ¼ ìƒì„±
          const colors = ['bg-indigo-500', 'bg-purple-500', 'bg-pink-500', 'bg-teal-500', 'bg-orange-500'];
          const hoverColors = ['hover:bg-indigo-600', 'hover:bg-purple-600', 'hover:bg-pink-600', 'hover:bg-teal-600', 'hover:bg-orange-600'];
          
          jobRecommendations[finalType].forEach((job, index) => {
              const button = document.createElement('button');
              button.textContent = job;
              button.classList.add('btn', colors[index % colors.length], hoverColors[index % colors.length]);
              button.dataset.job = job;
              button.addEventListener('click', selectJob);
              jobButtons.appendChild(button);
          });
          
          showScreen(resultScreen);
      }

      // --- ì´ë¯¸ì§€ ìƒì„± ë¡œì§ (í”„ë¡¬í”„íŠ¸ ê°•í™”) ---

      let selectedJob = null;
      let selectedGender = null;
      
      // ì§ì—… ì„ íƒ
      function selectJob(e) {
          selectedJob = e.target.dataset.job;
          selectedJobText.textContent = selectedJob;
          showScreen(imageGenScreen);
      }

      // ì„±ë³„ ì„ íƒ
      genderButtons.forEach(button => {
          button.addEventListener('click', () => {
              selectedGender = button.dataset.gender;
              
              // ì„ íƒëœ ë²„íŠ¼ ì‹œê°ì  í‘œì‹œ
              genderButtons.forEach(btn => btn.classList.remove('ring-4', 'ring-offset-2', 'ring-indigo-500'));
              button.classList.add('ring-4', 'ring-offset-2', 'ring-indigo-500');
              
              // ìƒì„± ë²„íŠ¼ í™œì„±í™”
              generateBtn.disabled = false;
              generateBtn.classList.remove('bg-gray-400');
              generateBtn.classList.add('bg-green-500', 'hover:bg-green-600');
          });
      });

      // ì´ë¯¸ì§€ ìƒì„± ë²„íŠ¼ í´ë¦­
      generateBtn.addEventListener('click', generateImage);

      // ì´ë¯¸ì§€ ìƒì„± API í˜¸ì¶œ (í”„ë¡¬í”„íŠ¸ ê°•í™”)
      async function generateImage() {
          if (!selectedJob || !selectedGender) return;
          
          // ë¡œë” ë³´ì´ê¸°, ì´ì „ ê²°ê³¼ ìˆ¨ê¸°ê¸°
          loader.classList.remove('hidden');
          errorMessage.classList.add('hidden');
          resultImage.classList.add('hidden');
          resultImage.src = '';
          generateBtn.disabled = true;

          const jobDetail = jobDetails[selectedJob];
          let activity = jobDetail ? jobDetail.activity : 'ì—´ì‹¬íˆ ì¼í•˜ëŠ”';
          let background = jobDetail ? jobDetail.background : 'ì•„ë¦„ë‹¤ìš´ í’ê²½ì˜ ì§ì¥';

          // í”„ë¡¬í”„íŠ¸ ê°•í™”: ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ ëª…í™•í™” ë° ì§ì—…ë³„ êµ¬ì²´ì ì¸ í™œë™/ë°°ê²½ ì¶”ê°€
          // AIê°€ í—·ê°ˆë¦¬ì§€ ì•Šë„ë¡ í”„ë¡¬í”„íŠ¸ë¥¼ ë” ê°„ë‹¨í•˜ê³  ëª…í™•í•˜ê²Œ ë³€ê²½
          const prompt = `ë”°ëœ»í•œ ì• ë‹ˆë©”ì´ì…˜ ê·¸ë¦¼ì²´. ${background}ì—ì„œ ${selectedGender} ${selectedJob}(ì´)ê°€ ${activity}í•˜ëŠ” ëª¨ìŠµ. ë°ì€ í‘œì •.`;
          
          // â­ï¸â­ï¸â­ï¸ Vercel í•¨ìˆ˜ ì£¼ì†Œë¡œ ë³€ê²½ â­ï¸â­ï¸â­ï¸
          // ì´ì œ index.htmlì€ ìš°ë¦¬ ì„œë²„(/api/getData)í•˜ê³ ë§Œ í†µì‹ í•©ë‹ˆë‹¤.
          const apiUrl = '/api/getData';
          // â­ï¸ (ê¸°ì¡´ apiKey, googleApiUrl ë³€ìˆ˜ ì‚­ì œë¨) â­ï¸
          
          // gemini-2.5-flash-image-preview ëª¨ë¸ì˜ ìš”ì²­(payload) í˜•ì‹
          // ì´ payloadë¥¼ ìš°ë¦¬ Vercel í•¨ìˆ˜(/api/getData)ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
          const payload = {
              contents: [{
                  parts: [{ text: prompt }]
              }],
              generationConfig: {
                  responseModalities: ['TEXT', 'IMAGE']
              },
          };
          
          // ì¬ì‹œë„ ë¡œì§ì„ í¬í•¨í•œ fetch
          let response;
          let success = false;
          for (let i = 0; i < 3; i++) { // ìµœëŒ€ 3ë²ˆ ì¬ì‹œë„
              try {
                  // â­ï¸ apiUrlì´ '/api/getData'ë¡œ ë°”ë€ ê²ƒ í™•ì¸! â­ï¸
                  response = await fetch(apiUrl, { 
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify(payload)
                  });
                  
                  if (response.ok) {
                      success = true;
                      break;
                  }
                  
                  if (response.status === 429 || response.status >= 500) {
                      await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000)); // Exponential backoff
                  } else {
                      break; 
                  }
              } catch (error) {
                  console.error('Fetch error:', error);
                  if (i < 2) { 
                      await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
                  }
              }
          }

          loader.classList.add('hidden'); // ë¡œë” ìˆ¨ê¸°ê¸°

          if (!success || !response) {
              console.error('API call failed after retries.');
              showError('ê·¸ë¦¼ì„ ë§Œë“œëŠ”ë° ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
              generateBtn.disabled = false;
              return;
          }

          try {
              // Vercel í•¨ìˆ˜ê°€ Google APIì˜ ì‘ë‹µì„ ê·¸ëŒ€ë¡œ ëŒë ¤ì£¼ë¯€ë¡œ
              // ê¸°ì¡´ ì‘ë‹µ ì²˜ë¦¬ ë¡œì§ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              const result = await response.json();
              
              // gemini-2.5-flash-image-preview ì‘ë‹µ êµ¬ì¡°ì— ë§ê²Œ íŒŒì‹±
              const imagePart = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData);
              const base64Data = imagePart?.inlineData?.data;

              if (base64Data) {
                  resultImage.src = `data:image/png;base64,${base64Data}`;
                  resultImage.classList.remove('hidden');
              } else {
                  console.error('Unexpected API response:', result);
                  // 404ê°€ ì•„ë‹Œ, ì‘ë‹µì€ ì™”ëŠ”ë° ê·¸ë¦¼ì´ ì—†ëŠ” ê²½ìš°
                  // (ì˜ˆ: ì•ˆì „ í•„í„°ì— ê±¸ë ¸ì„ ë•Œ)
                  let errorMsg = 'ê·¸ë¦¼ì„ ë°›ì•„ì˜¤ì§€ ëª»í–ˆì–´ìš”. ì‘ë‹µ í˜•ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤.';
                  if (result?.candidates?.[0]?.finishReason === 'SAFETY') {
                      errorMsg = 'ì•ˆì „í•˜ì§€ ì•Šì€ ë‚´ìš©ì´ë¼ ê·¸ë¦¼ì„ ê·¸ë¦´ ìˆ˜ ì—†ì–´ìš”. ğŸ˜¢';
                  } else if (result.message) {
                      errorMsg = result.message; // ì„œë²„(api/getData)ì—ì„œ ë³´ë‚¸ ì—ëŸ¬
                  }
                  showError(errorMsg);
              }
          } catch (error) {
              console.error('Error parsing response:', error);
              showError('ê·¸ë¦¼ì„ ë°›ì•„ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.');
          }
          
          generateBtn.disabled = false; // ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
      }
      
      // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
      function showError(message) {
          errorMessage.textContent = message;
          errorMessage.classList.remove('hidden');
      }

  </script>

</body>
</html>




